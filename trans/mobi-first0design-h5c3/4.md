# 第四章。构建联系人表单

在[第三章](3.html "Chapter 3. Building the Gallery Page")*搭建图库页面*中，我们搭建页面展示自己的作品。希望你在这些页面上展示的作品的质量是如此引人注目，以至于网站访问者会想联系你来雇佣你来完成你的惊人工作。

让我们让这种能力变得简单而有吸引力！

# 制定表格计划

我知道表单并不十分令人兴奋，但我们必须以某种方式获取用户信息，所以我们不妨让它们看起来不错，而不是沉闷和冰冷。一个干净友好的形式将是简单和最小的，只收集我们需要的信息。我们还需要使填写表格的过程尽可能清晰和没有挫败感。320 和以上框架的建立是为了促进这一点，但我们仍然需要做必要的规划，以确保它只是这样。

幸运的是，对于我们相当简单的需求来说，这不会太难。让我们想一想，为了跟进一个潜在客户，我们需要收集的最起码的信息。以下是我们需要的东西:

*   潜在客户的姓名
*   这个公司
*   电子邮件地址
*   电话号码
*   一条信息

需要记住的几件重要事情是确保所有字段的标签让用户知道在哪个字段放什么。我认为对可用形式最有说服力的论证是这样的:

人们从左到右，从上到下阅读。因此，标签应该出现在它所描述的输入的上方，因为用户将首先阅读标签，然后看到输入。这当然是一个假设，即我们的用户理解定义表单输入的视觉提示。如果我们的用户不知道表单域是什么，我们可能会倒霉。也就是说，我们的用户界面很大程度上依赖于人们对约定的理解，这一事实可能值得思考！

在这个表单上，我们还可以使用其他约定来实现我们的目的。一个常见的方法是使用占位符向用户显示每次输入中预期的内容类型示例。同样，任何长期使用互联网的人都知道这个惯例。希望这对不太熟悉这些惯例的人也是一个有用的提示。

## 处理必填字段

我们需要让用户知道的最后一件事是我们希望他们输入的必填字段。关于这一点有两个学派；我会介绍两者，主要是因为我看到了两者的优点，这真的取决于你在做什么。

一个惯例是将所需的`*`放在所有需要的字段旁边。这种约定同样适用于大多数访问者，但是这种方法的问题是，如果我们本质上注释了一些可选的字段，可能会妨碍收集一些信息。这个论点基本上声称，如果我们不需要一条消息，也不将它标记为必需的，那么用户跳过这条消息的可能性就会增加。我们的表单应该绝对要求用户提交姓名和电子邮件；否则，我们根本无法回应。习惯上不需要电话号码或信息。将**电话**字段保留为可选在大多数情况下是对那些不愿意通过电话联系的人的一种礼貌。将**消息**字段保留为可选是对用户的一种礼貌。我们不想让它成为强制性的，因为一旦我们有了名字和电子邮件，我们就可以随时回复，尽管我们的回复必须非常普通。这有助于我们的潜在客户了解我们下一次谈话的背景。它节省了每个人的时间和精力。

考虑到这一点，我想提出反对按要求标记字段的论点。论点是这样的:

如果我们作为网站的创建者，在表单上只放入我们绝对需要跟进的输入字段，那么表单应该足够简单，不会让用户气馁。在我们的例子中，我们有五个字段，这是相当吝啬的。然后，通过不按要求标记任何字段，我们建议我们想要我们要求的所有信息，但我们实际上并不需要它。我们可以使用表单验证来确保得到最少的信息，在我们的例子中是姓名和电子邮件。

最终，这些决定会考虑很多其他因素。由于我们的投资组合网站最有可能用于数字媒体工作，我们的受众应该熟悉网络惯例，我们可以利用这一点为每个人带来好处，并以一种干净、简单的形式呈现给他们。在其他项目上，你肯定要迎合不同的受众，或者收集更多的数据。希望带你看一下我对这个表格的规划对你将来做决定有所帮助。

## 表单的布局

好了，现在让我们继续讨论我们希望这个表单如何查看我们的断点。这一页将会很容易，因为我们在这一页的全部重点是从潜在客户那里获得一些信息。由于这个原因，我们几乎可以从移动设备到桌面拥有精确的布局。

这是手机的布局:

![The form's layout](img/6463_04_16.jpg)

这里有一个比 992 像素宽的布局示例:

![The form's layout](img/6463_04_17.jpg)

很难区分他们！我知道，如果有人在他/她的全新迅雷上以全宽打开这个表单，输入字段将变得不必要的宽。但是真的，我们不需要也不希望这个页面上的任何其他内容来干扰，所以我们会做一点努力来让页面看起来仍然令人愉快。

好了，说够了！让我们写一些代码。

首先，让我们把一个小英雄区放在表单的正上方。我总是喜欢给我在网络上创建的东西添加人情味的机会，所以就在标题下面，让我们放置这个标记:

```html
<!--hero markup -->
  <div class="hero subhead">
    <div class="container">
      <h1>Say Hello!</h1>
      <p>I just met you and this is crazy. Leave your number, I'd love to work with you.</p>
    </div>
  </div>  <!--end hero markup -->
```

你也许应该把你自己的信息放进去，但你明白了。

之后，让我们把表单需要的标记放进去。我们将使用的标记在英雄之后:

```html
<!--form -->  <div class="full row clearfix">
    <h2 class="h2">Hello! Is it me you're looking for?</h2>    <p>Reach out to me for your new projects.</p>
    <form method="post" action="#" class="contact">      
<p>
<label for="name">Name</label>
<input id="name" name="name" placeholder="Firstname Lastname" type="text" required/>
</p>
<p>
<label for="company">Company</label>
<input id="company" name="company" placeholder="Widgets Inc." type="text"/>
</p>   
<p>
<label for="email">Email</label>>>      
<input id="email" name="email" placeholder="firstname@somename.com" type="email" required/>
</p>
<p>         
<label for="phone">Phone</label>        
<input id="phone" name="phone" placeholder="123-456-7890" type="tel"/>      
</p>      
<p>         
<label for="message">Message</label>        
<textarea id="message" name="message"></textarea>      
</p>      
<p>         
<input type="submit" class="btn btn-primary btn-extlarge" value="Send It!" />      
</p>    
</form>  
</div>  
<!--end form -->
```

这种标记大部分是简单明了的，但是我使用的标记有点固执己见，是很好的实践。首先，您会注意到我没有为表单的`action`参数提供一个值，该参数用于将表单数据发布到服务器。我将把它留给你，因为我们将不会制作一个后端来处理这些数据(或者，你可以使用许多漂亮的服务之一来为你处理联系和电子邮件表单)。

向下移动代码，您会注意到我已经将每个标签和输入配对包装在`<p>` `</p>`标签中。这并不罕见，但这是一种处理表单布局的固执己见的方式。如果可以避免的话，我不喜欢风格的输入和表单控件。对于增长的站点，这些会导致大量不可重用的工作。您可以通过设置包装表单控件的一些元素的样式来消除或减少这种情况。像往常一样，保持这些元素在语义上适当。我认为一个标签和一个输入形成了一个段落，因为它们共享同一个主题，并且是随后内容主题的一个中断。

## 输入标签魔法

此外，尤其是对于手机，请始终利用标签中的`for`属性，该属性仅在您将该参数的值设置为反映您想要与之关联的输入的标识值时有效。换句话说，如果你的标签是**电子邮件**输入，给该输入一个`email` ( `id=email`)的 ID，并将标签也设置为`email`(`name=email`)。这种做法不仅仅是语义上的，不然的话，我大概也不会费心了。一旦您以这种方式将输入和标签配对，就会发生一些神奇的事情。标签现在获得了神奇的力量——当用户点击或触摸标签时，与之配对的输入将获得焦点。这个标准早在使用触摸界面浏览网页的实践被普遍使用之前就已经存在了，但是触摸是多么棒的功能啊！现在，手指肥胖、手颤抖或动作不精确的用户更有可能击中目标。如果你从来不知道这一点，测试一下。如果你已经知道了，希望你跳过这一段；时间是宝贵的。

我还有一些事情要指出。我已经将`required`属性放置在所有我想要强制的字段上。这个属性对于 HTML 5 规范来说是新的，并且在引擎盖下为带来了一些不错的魔法。我们将需要为不支持此功能的浏览器做一个后备，但是您可以暂时享受 HTML 5 将使您作为 web 开发人员的工作比以前更容易的幻想(不要担心，您仍然需要编写一些 JavaScript 来帮助验证此表单)。尽管如此，一旦你达到几乎所有潜在用户都在使用现代浏览器的地步，这个特性将会是一个省时的工具(问题是，那将会是什么时候？).不管怎样，去试试吧。启动一个简单的服务器，比如 Python Simple HTTP 服务器，并访问当前状态的联系人表单。不用填表格，点击**发送**。如果您使用的是 Chrome，您会收到一条很好的验证错误消息，**请在工具提示中填写此字段**:

![Input label magic](img/6463_04_18.jpg)

其他浏览器的现代版本(火狐、Safari 和 Internet Explorer)也会做类似的事情。也可以在手机上试试；挺好看的！

好吧，这种乐趣很快就会结束，因为我们需要为不支持这种功能的浏览器做出让步。但是由于 HTML 5 规范，我们仍然有一些有趣的增强要添加。接下来，我想指出一些 HTML 5 表单字段属性绝对无痛的增强。您会注意到电子邮件的输入设置为`type="email"`。这个属性给你两种特殊的酱料。在桌面和移动设备上(当然，在支持它的浏览器中)，您都可以获得我们用 JavaScript 编写了多年的电子邮件地址验证。它寻找一个`@`等等。在手机上，它应该打开一个软键盘，上面还有一个突出的`@`。

HTML 5 中引入的另一个漂亮属性是`type="tel"`属性。这样做的唯一好处是，在手机上，它将拉起一个数字键盘，而不是字母键盘。

![Input label magic](img/6463_04_19.jpg)

对于那些在小屏幕上填写表格的可怜灵魂来说，这真是一件好事。你的用户会感谢你的。

现在，让我们添加我们需要的最小样式，以使它看起来与我们的其他应用一致。一切看起来都很棒；唯一的例外是输入上的边框是橙色的。如果您正在使用 SASS，并且您的编译器编写了样式的行号，那么这确实很容易调试。我一直鼓励你使用 SASS，但是有一点我很喜欢，那就是在你开发的时候，可以打印所有样式选择器的行号。您确实需要为生产编译压缩的 CSS，但是对于开发，总是切换到对调试友好的代码。我使用 CodeKit 是为了这个，还有其他一些原因。我应该补充一点，我通常使用开源命令行工具。比如我用`tmux`和`vim`写代码，不是独立的文本编辑器。但是 Codekit 有这么多有用的功能，配置起来毫不费力，我真的对它上瘾了。我只希望它有命令行版本。

当我必须用 CSS 解决问题时，CodeKit 让我的一整天变得更轻松。

当我看到这些古怪的橙色边框时，我在 Chrome 开发工具中看到了以下内容:

![Input label magic](img/6463_04_20.jpg)

我看到边界属性被定义在 _ `forms.scss`中的第 79 行。很有帮助，是吗？

不幸的是，这不是故事的结尾。当我看到这一行代码时，我看到的是:

```html
input,
textarea,select {
display : inline-block;
width : 100%;
padding : 4px;
margin-bottom : $baselineheight / 4;
background-color : $inputbackground;
border : $inputborderwidth $inputborderstyle $inputborder;
color : $textcolor;

&:hover {
border-color : $inputhover; }
}
```

我马上注意到两件事。边框颜色由变量 `$inputborder`定义，该边框的悬停颜色由`$inputhover`定义。在我看来，这些都是命名不当的变量，因为它们在语义上并不准确，但平心而论，我过去做过更糟糕的事情。无论如何，如果我可以在这里挑选一个改进，那就是给这些变量命名一些东西，以指出它们实际上是颜色的变量——比如`$inputbordercolor` 和`$inputborderhovercolor`。当然，那些名字很长，但很精确。

好了，继续。我们需要去`_variables.scss`分部看看到底是怎么回事。看在上帝的份上，为什么这些边框是橙色的？别慌，救援马上就到。进入`_variables.scss`文件，我快速搜索`$inputborder`，我看到的是:

```html
$inputborder    : lighten($basecolor, 40%);
```

让我们想想代码中发生了什么。对于许多设计来说，使用基本颜色作为输入边框可以创建和谐的设计。但是，在我的例子中，我选择了黄橙色，这使得对比度非常低。说实话，我觉得他们很讨厌；我无法想象他们对一个有视觉挑战的人来说是什么样子。但是，此外，我猜 90%的时候，我希望我的输入边框是灰色的。为什么？嗯，对于像创建表单这样关键的东西，我想确保用高对比度的颜色很好地定义字段，在白色背景下，最大的对比度来自黑色。如果`#000`黑色看起来过于暗淡，我们总是可以选择接近黑色的较暗的灰色阴影。在这一点上，我认为这种设计(也许还有未来的其他设计)最好继续下去，将这个变量重新定义为某种灰色阴影。

让我们试试这个:

```html
$inputborder    : $lightgrey;
```

我实际上试验了这个变量文件中定义的所有灰色，我更喜欢浅灰色。这有助于使行看起来更有条理。到目前为止，您可能已经注意到的另一件事是，当您将鼠标悬停在输入上时，边框仍然会变为橙色。让我们把它变成深灰色。与我们之前所遵循的类似，您会注意到`input:hover`样式是在`_forms.scss`文件中定义的。看起来是这样的:

```html
&:hover {
    border-color : $inputhover; }
```

所以现在我们去`_variables.scss`文件重新定义`$inputhover`！

让我们这样做:

```html
$inputhover     : $grey;
```

看起来不错！

我们只需要更多的东西来调整这个页面上的样式。让我们根据输入在移动浏览器中的呈现方式，使输入看起来更好更一致。你会注意到在之前的一个 iPhone 形式的截图中(或者在你自己的手机上，如果你正在那里检查你的工作)，输入在手机上自动得到圆角。让我们在表单页面中设置一种样式。

我想更改整个站点的所有输入，所以我要去编辑`_forms.scss`文件。

更新此样式:

```html
input,
 textarea,
 select {
 display : inline-block;
 width : 100%;
 padding : 4px;
 margin-bottom : $baselineheight / 4;
 background-color : $inputbackground;
 border : $inputborderwidth $inputborderstyle $inputborder;
 color : $textcolor;
 @include rounded(6px); //this is the new bit

 &:hover {
 border-color : $inputhover; }
}
```

在使用`rounded mixin`的时候，我喜欢 6 px，但是可以根据你的口味随意调整。对于这些输入，我想改变的另一件事是填充。有一个大的目标是很好的，但是他们也可以在单词和输入的边界之间有一点喘息的空间。就在那个`rounded mixin`下面，让我们添加一些填充:

```html
padding: 10px;
```

看起来好多了！

我们在这个页面上的最后一个样式任务是包含表单的宽度。让我们不要让窗体变得比 992 px 更宽，并保持居中。

我们可以做到这一点，而不必实际使用任何`@`媒体查询。让我们回到`site.scss`文件，并添加一个样式，如果我们想重用它，它将工作相同:

```html
.row {
  max-width: 992px;
  margin: 0 auto;
}
```

这正是我之前所描述的。这实际上是一个很好的例子，说明了如何在不一定依赖新标准的情况下考虑响应。

好了，现在我们需要做的最后一件事是去连接验证，这将适用于还不支持 HTML 5 `required`属性的浏览器。

## JS 验证后退

好吧，我们可以写下所有的倒退。知道如何编写回退是非常有用的，但这超出了本书的范围。此外，还有一种非常棒的方法可以让已经做好的事情倒退。名为**webshims**T3，在这里可以找到:[http://afarkas.github.io/webshim/demos/index.html](http://afarkas.github.io/webshim/demos/index.html)。

这个库使得利用大量的 HTML 5 特性变得非常容易，而不需要为旧的浏览器编写大量的支持。在我们的例子中，我们只需要做很少的事情来支持表单中的 HTML 5 验证。

从我之前列出的网站下载 lib。完成后，将`js-webshim`文件夹复制到您的项目中。我已经在本章的`after`文件夹中完成了。

现在，我们需要再做两件事，我们就可以出发了。

包括`contact.html`页面底部`webshims` lib 中的`polyfiller`脚本:

```html
<script src="js/js-webshim/minified/polyfiller.js"></script>
```

您必须将它放在 jQuery 之后，但在您编写的脚本之前。

现在在`script.js`中，添加这一行来实例化`polyfiller`脚本:

```html
$.webshims.polyfill();
```

我已经将此放入`ready`函数中，以确保在它触发之前所有的表单元素都存在于**文档对象模型** ( **DOM** ) 中。

现在，我们已经完成了我们的表单验证，它应该可以在不支持 HTML 5 验证的浏览器中工作。好好享受！

# 总结

因此，在这一章中，我们计划了一个比其他页面简单得多的布局，但这是有充分理由的。没有人非常喜欢填写表格，但是如果我们能把有表格的页面上的噪音降低，我们就能鼓励用户给我们信息，以更好地促进交流。或者至少，我们不会阻止人们填写我们的表格。

可能，这里最大的挑战是对客户端验证的跨浏览器支持。在知道大多数用户使用现代浏览器之前，我们仍然需要填充和填充，但是正如我们所看到的，编写良好的代码也使这变得相当容易，除非我们的需求很复杂。

接下来，让我们进入**关于我**页面。