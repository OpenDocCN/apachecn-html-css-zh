# 附录 a . html 5 样板的剖析

这个附录是为了帮助那些没有 HTML5 样板经验的人。如果你对它了如指掌，就没有必要再看下去了(因此这是附录的原因)。但是如果您是 HTML5 样板的新手，这个附录将帮助您更深入地了解正在发生的事情，从而开始使用 320 和更高版本。在本附录中，我们将查看 HTML5 样板的结构和选择，并了解其选择对您可能开发的其他网页的影响。

# 什么是 HTML5 样板？

首先，你可以在[http://html5boilerplate.com/](http://html5boilerplate.com/)找到这个项目的首页。该网站提供了对 HTML5 的快速概述，但没有提供太多的上下文来解释为什么 HTML5 样板文件是有用的，以及它为什么被创建。

我不会详细讨论 HTML5 样板的历史。这本书主要关注的是如何做事情，而不是事情是如何发生的，所以我会试着解释足够多的背景知识，让你知道它是如何工作的，希望你未来对 320 和 Up(以及任何其他框架)的 HTML5 样板的使用会有足够的理解，帮助你解决未来的问题。

从本质上来说，HTML5 样板是一个项目，其目的是创建一个 HTML 页面，该页面包含制作有效的跨浏览器网页所需的所有组件；它还利用了现代浏览器中支持现代 HTML5 规范的所有优点。

如果你想更多地了解我所说的 HTML5 规范的含义，或者现代浏览器和旧浏览器的区别，那么我鼓励你做一些搜索和阅读。我留给你的任何链接都有很快过期的风险。但是，简而言之，HTML5 是浏览器应该做什么的规范。它努力使所有浏览器支持相同或相似的功能，从而使 web 开发人员能够制作网页，并使其在所有浏览器中表现相同。这还不是现实，我认为也永远不会是现实；不过，平心而论，现在的情况比过去好多了。

所以，目前作为一个 web 开发者，在大多数情况下，你最有可能至少要支持 **【互联网浏览器】**(**IE**)8 及以上版本，火狐 4 及以上版本，以及当前版本的 Chrome(版本对 Chrome 来说没那么重要，因为它一直鼓励用户更新)。注意这里的挑战。除了 Chrome 之外，所有浏览器的当前版本都高于您必须支持的版本。此外，如果您在撰写本文时正在制作一个网站，那么根据您的用户群，您可能需要支持这些浏览器的旧版本以及更多的浏览器。而那些只是桌面版本；忘掉那些浏览器的所有移动版本以及 WebKit 的 Android 风格吧，它有数以百万计的版本。

了解了这一点，你就能明白为什么我和许多其他前端工程师会鼓吹前端设计的简单性。一个简单的设计很有可能给最终用户带来良好的体验，也有可能达到一致。

但是，不付出一些努力，你就无法获得这种体验和一致性。HTML5 样板文件对代表您做出这种努力大有帮助。让我们浏览几页来更好地理解它是如何工作的。在您阅读的过程中，我建议您从[第 1 章](1.html "Chapter 1. Mobile First – How and Why?")、*移动优先–如何以及为什么*的`before`目录中调出`index.html`文件。这是我们添加任何内容之前的样板版本。让我们从顶部开始！

## 条件注释

条件注释的代码如下所示:

```
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
```

这段代码嵌套在注释中，但有一些条件逻辑。只有 Internet Explorer 有超能力使用这个逻辑。前面的例子只在浏览器执行版本低于 IE7 的情况下才在注释中呈现 HTML 代码，因此语法`[if lt IE 7]`。您可以推断，不同的 HTML 标签是基于 IE 的版本呈现的。您可以使用这个 HTML 标记中的类来创建特殊的样式，这些样式通常是处理这些旧浏览器的缺点所必需的。

如果您向前跳一点，您将看到以下条件注释:

```
<!--[if (lt IE 9) & (!IEMobile)]>
  <script src="js/selectivizr-min.js"></script>
<![endif]-->
```

这包括一个包含在 320 和 Up 框架中的 JavaScript 库，它允许 CSS3 选择器在早于 IE9 的浏览器中工作。

## 一大堆移动元标签

所以接下来，在头部标签中，你会看到一些元标签，它们被供应商用来表演一个魔术。首先要注意的是:

```
<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
```

如果你想了解元标签的更多细节，你可以访问评论中提供的链接。我鼓励你这样做。

总而言之，这些元标签有助于移动浏览器知道它们可以呈现不仅仅面向桌面的页面。习惯这一点，因为未来会有更多类似的事情发生。

在此之后，有一堆评论允许你为苹果设备创建图标。如果用户想为你的网站创建快捷方式，这些图标很酷。它会为你的网站创建一个图标，就像一个应用程序会有的那样。如果你想利用这一点，你需要所有维度的图标，你需要将它们放在已经指定的路径中，或者编辑路径，以便它加载你的图标文件。

还有更多苹果特有的元标签。对很多人来说，你可以看到，你只需要填写空白字段(例如`apple-mobile-web-app-title`)。

```
<meta name="viewport" content="initial-scale=1.0">
```

上一行代码确保只要下一行代码中的`content`字段设置为`yes`，页面就不会被放大:

```
<meta name="apple-mobile-web-app-capable" content="yes">
```

在下一部分中，标记为`startup images`的部分为您的网页提供了更多类似应用程序的功能。当用户从他们的主屏幕启动您的网站时，这些图像将填充他们的屏幕，直到页面加载。同样，您需要提供列出的所有维度的图像，并将它们放在正确的路径中。但是，您应该知道，这个特定的标记块可能会被移除，并使用更干净的代码来应用。等我们一起看`helper.js`文件的时候，你会了解到这一点。

幸运的是，Windows 8 的下一组标签几乎没有增加新的工作！这个标签可以并且应该共享你为苹果创建的图标，并且会出现在那些漂亮的 Windows 8 小块中。您可以在以下标签中设置图块的颜色:

```
<meta name="msapplication-TileColor" content="#000">
```

求你了，求你了，我求你了。将其设置为热粉色。

咻！我们没头了！

现在，您可以跳到文件的底部。

## 包括你需要的脚本

其余的并不令人惊讶。我们在页脚下面包含以下脚本，顺序如下:

*   jQuery (首先从 CDN 开始，然后在本地作为后备)
*   插件文件
*   脚本文件
*   助手文件
*   谷歌分析

以这种方式制作你的网站没有问题，但是我经常将插件、脚本和助手合并到一个文件中。

`helper.js`文件应该在脚本文件之前；否则不能调用其中的函数。如果它们是正确的，只要重新排列它们，你就可以走了。

最后一件事是我想给你一个帮助文件的概述，因为它是 HTML5 样板文件的一部分。

## helper . js 文件

这个文件中的代码真的很有帮助。其中的注释解释了每个函数的大部分功能。尽管如此，我还是想强调一些事情，并确保您知道如何实现它们。

基本上，要调用这里的任何函数，只需在你需要的文件中找到一个(或者只是想试试)并在它后面放上`();`。这是 JavaScript 执行函数的方式。例如，这个文件中定义的第一个可用函数(因为它们中有`function`这个词，所以可以说它们是函数)如下:

```
MBP.scaleFix = function() {…
```

如果您想使用此功能，只需将其添加到您的脚本文件中:

```
MBP.scaleFix();
```

瞧！你刚刚调用了这个函数。现在让我们快速浏览一下这里最有用的功能。请记住，该脚本中的许多项都是由函数本身使用的；所以，如果你尝试使用它们，它们可能什么都不会做，尤其是那些里面没有这个单词功能的。

*   `MBP.scaleFix`:这个功能阻止了 iOS 中发生的一个烦人的 bug。当用户将手机从纵向旋转到横向时，这种缺陷就会显现出来。在风景中，你可爱的网页最终会从屏幕边缘消失。但是，没有烦恼；这个脚本修复了它。所以你应该用它。
*   `MBP.hideUrlBar`和`MBP.hideUrlBarOnLoad`:这两个函数是可调用的，但是你更有可能使用`MBP.hideUrlBarOnLoad`来完成所说的事情。这个功能在手机上很有用，因为一旦页面加载，它会将网址栏向上滚动到视图之外，从而节省宝贵的屏幕空间。这对在 iPhone 上使用 Safari 的用户来说超级有用。我想你可以给`MBP.hideUrlBar`打电话，但是我很难想象一个场景，你想直接给它打电话而不吓坏用户。`MBP.hideUrlBarOnLoad`谓`MBP.hideUrlBar`。
*   `MBP.fastButton`:这是一个函数，用来绕开 WebKit 浏览器的一个特性，当用户触摸一个链接或按钮时，会引入轻微的延迟。小心使用。
*   `MBP.splash`:这个脚本可以替换我们之前讨论的`Startup images`块注释掉的代码。它在我们之前检查的样板文件的头部提供。如果你已经忘记了，回去再读一遍。当使用这个 JavaScript 来替换页面中的所有标记时，我真的很喜欢更干净的页面，尤其是考虑到只有少数用户会看到这个闪屏。事实上，如果你去抓取最新版本的 HTML5 Mobile 样板，而不是当前(截至本文撰写之时)版本的 320 和更高版本中提供的索引页面，它将不会有包含所有闪屏图像的标记块。
*   `MBP.autogrow`:这个功能很棒如果你的回复网站上有表单的话。它让`<textarea>`随着用户填充而增长。
*   `MBP.enableActive`:这是另一个令人敬畏的增强，启用了移动 Safari 中的活动伪类，并且对于那些倾向于滞后一点的按钮的用户反馈很好(除非你有足够的勇气使用`FastButton`)。
*   `MBP.preventZoom`:这就做到了所说的。移动 Safari 的默认行为是在聚焦事件发生时放大。这对用户来说确实不方便，因为他们必须在完成向输入字段输入文本后手动缩小。

现在你知道的足够多了，可以在自己的应用程序中尝试这些了。大部分情况下，你会希望在页面加载并准备好的时候触发这些功能，所以只使用那些你需要的功能，以防止让加载了大量 JavaScript 的小设备陷入困境。