# 第三章。构建图库页面

在前一章中，我们做了大量的工作，并为我们的投资组合网站的其余部分建立了相当的基础。有了我们现在拥有的知识和我们在 320 和 Up 框架上编写的少量代码，我们真的可以开始快速行动了。在这一章中，我们将这样做。我们将建造一个嵌板画廊，这些嵌板将叠放在窄屏幕上，平铺在宽屏幕上。为此，我们将使用与上一章相同的基本方法来处理页面底部的内容面板三元组。

# 创建线框

在我们进入代码之前，让我们看一下一些线框。下面的截图显示了我们的屏幕在小屏幕上应该是什么样子:

![Creating the wireframe](img/6463_03_08.jpg)

随着浏览器变得更宽，我们希望这些图像变得更大，并将布局从堆叠更改为平铺，以更好地利用屏幕空间。以下截图是 992 像素宽屏幕的基本布局:

![Creating the wireframe](img/6463_03_09.jpg)

我在 320 和 Up 上面创建的两个之间有很多可视断点。320 和更高版本唯一需要记住的是如何保持页面的其余部分与其保持一致。当我们继续进行时，让我们分析布局正在做什么，并通过使用 320 和 Up 中已经存在的样式或创建我们自己的样式来让页面的其余部分玩得开心。

我会为自己创建一个**图库**页面的方式是在页面顶部有某种英雄，但不是幻灯片。我觉得在这类网站的大多数页面顶部用一句简单、大胆的话来引导用户是很重要的。主要原因是你不能指望用户先来你的**主页**页面，所以你需要在每个页面建立相当多的关于你网站的背景。我想我会把这个策略和连载电视的编剧所用的策略进行比较:你必须假设观众可能需要每一集的一点背景信息，或者，在这种情况下，一页。

所以，让我们从一个英雄开始，这个英雄没有那么高，但是仍然有非常大胆的文本——一个标题和一个简短的句子。

要开始，可以从`ch3/before/320andup/gallery.html`中抓取`gallery.html`文件。该文件将包含所有我们可以从**主页**页面重用的项目，例如，文件头部的代码、导航、页脚等。花点时间看看它，看看我们在前进的过程中每一页都在重复使用什么。继续，在浏览器中打开这个页面，看看你要开始做什么。你应该看到导航部分紧靠着页脚。别担心，我们很快就会填补他们之间的空白。

在我们继续之前，我只想快速概述一下我们从第一页中保留了哪些代码，以及为什么。当然，我们保留了从文件顶部到结束`</head>`标签的所有内容。我们也在重新使用从页脚开始一直到文件底部的代码。这是我们在每一页上完成跨设备和浏览器的基本工作以及包含我们的样式、收藏夹图标和 JavaScript 库所需的全部代码。我们也有在每个页面上都相同的代码，比如导航和页脚的标记。换句话说，我们在构建的每一页上重复这些代码。这是真的，但是，例如，如果您使用的是一个框架，比如 Django 或 Rails，或者是另一个框架中的某种模板语言，那么您可以将在每一页上重复的代码分离到它自己的文件中，这样它就可以在其他文件中重用和共享。这将是解决要求这些代码出现在每一页上的问题的好方法。

然而，为了让这本书与平台无关，我只是在我们前进的过程中一页一页地复制了这段代码。我真的不建议用这种方式制作网站。在不同的地方重复相同的代码只是邀请你在某个时候犯一个可怕的错误(希望我没有犯过错误)。

让我解释一下手动将这段代码从一页复制到另一页的一些风险。例如，如果您决定在一个页面上对导航部分进行更改，您必须记住在每个页面上进行相同的更改，并确保精确执行。如果你已经编程了一段时间，你会认识到这个原则是**不要重复自己** ( **DRY** )。这是编写代码的基本原则。你应该跟着它。这个原则是我为什么在前一章推荐使用 Sass(或 LESS)以及为什么应该使用 320 和 Up 这样的框架的主要理由！

好了，我说够了。

该页面的其他方面也可以在您选择的框架中重用。包含导航的页眉和页脚很可能在每一页上都是相同的，所以我也会让这些组件重复使用。我要指出的最后一点是，您还应该重用底部的 JavaScript。很多时候，开发人员根据页面需求，使用策略来动态地包含 CSS 和 JavaScript，但是对于我们简单的网站来说，这是不必要的。

现在我们已经处理了业务，让我们继续处理这个页面特有的内容。

# 苗条的英雄

现在，我们需要一个英雄在这个页面的顶部，但是我们不想过多地分散画廊瓷砖的注意力。所以，我们不想要一个大的，引人注目的形象。相反，我们想要一些大胆的内容，快速总结页面上正在发生的事情，并满足以下要求(我之前也提到过)；假设访问者可能在没有看到网站其他部分的情况下登陆了这个页面，同时没有侮辱已经浏览过这个网站的人的智力。

当然，你实际上说什么取决于你自己。真正的目标是理解内容的策略以及它与我们的布局的关系。

这是我们在一个 320 像素宽的设备上拍摄的东西的模型:

![The slim hero](img/6463_03_10.jpg)

以下是它在桌面浏览器上的外观:

![The slim hero](img/6463_03_11.jpg)

这两个模型的主要区别如下:

*   320 像素的布局比更宽的布局需要更小的字体
*   320 px 布局的文本居中对齐，而更宽的布局的文本向左对齐

这不是强制性的；幸运的是，这只是我做出的一个设计决定，我们也可以用响应性设计来支持。

现在，让我们为此编写一些代码。将以下标记放在关闭`</header>`标签的正下方。标记应该是这样的:

```html
<div class="hero">
  <div class="container">
    <h1>Gallery of My Stuff</h1>
    <p>There is almost all excellent stuff here. The rest is just really good.</p>
  </div>
</div>
```

现在，最酷的事情是，如果你把所有东西都放在正确的位置，你的页面看起来会接近我们想要的样子，因为我们正在重复使用**主页**页面的样式。准确地说，只有当我们在 320 像素宽的屏幕上看时，它才看起来正确。花点时间看看**主页**和这个新的**图库**页面，了解一下这些样式是如何被重新使用的。你可能会注意到一件事，现在我们的`<h1>`标签有超过两行的文本，我们的`line-height`太高了。让我们把它收紧一点。通过添加以下代码行编辑`.hero h1`样式:

```html
line-height: 1em;
```

现在，刷新页面，看看如何保持标题美观简洁。看起来很舒服，你不觉得吗？

好吧，那太简单了！这很管用。

原因如下:你会注意到我将高度设置为`1em`。`em` 是不同于像素的测量单位。像素设置一个显式测量值，`em`设置一个相对测量值。为什么要设置相对高度？让未来的改变变得更容易。一个`em`等于当前字体大小。所以，在这种情况下`line-height`最终等于字体大小。这是期望的结果，因为我们希望大于字体大小的`line-height`产生很少或没有额外的空白。

那么，为什么要这么抽象呢？你不必总是这样，但我喜欢在这种地方使用`em` s，因为这样可以减少改变字体大小的麻烦。如果我回来晚了，需要调整字体大小，我就不需要还调整`line-height`来维持当前的造型效果了。`Em` s 将继续渲染一个与字体大小相同的`line-height`。

接下来，让我们看看这一切是如何为桌面视图工作的。使用您喜欢的方法(响应的`.html`页面或只是调整浏览器的大小)，继续查看我们正在设计的最宽宽度，1382 像素宽。

问题是有一些细微的点差了一点点。你会注意到的一件事是，桌面布局的字体大小太大了一点，无法保持我们想要的布局苗条。因此，我们需要覆盖我们在**主页**页面上重复使用的一些样式。

有两种方法可以实现这一点。一种方法是在页面元素上方的某个地方分配一个类，我们希望以不同的方式设置样式，然后从该类派生一些新的样式来覆盖现有的类。例如，目前英雄中的`<h1>`元素获得了这种风格:

```html
.hero h1{
  font-size: 108px;
}
```

所以，我们可以给我们的英雄增加一个新的职业，如下所示:

```html
<div class="hero slimmer">
```

然后，在样式表的更深处，有一个具有以下属性的样式:

```html
.hero.slimmer  h1{
  font-size: 60px;
  text-align: left:
}
```

然后，该样式将覆盖应用于其上的`.hero`样式。然而，这并不理想；现在我们有了两种`hero`，非苗条的那个语义模糊。相反，我们可以给两种类型的`hero`添加一个类，以明确这些样式适用于大型版本的`hero`。

首先，让我们返回并更改我们的**主页**页面 HTML，如下所示:

```html
<div class="hero jumbo">
  <div class="container">
  <h1>Big Headline</h1>
  <p>YOLO vero scenester, semiotics next level flannel Austin shoreditch portland 3 wolf moon chillwave gentrify consequat tousled retro.</p>
  <a href="./contact.html" class="btn btn-primary btn-extlarge">Contact Me</a>
  </div>
</div>
```

注意类`jumbo`的增加。现在，假设您使用的是 SCSS，我们需要为尺寸为 768 px 及以上的屏幕编辑样式表以匹配它。为此，打开`ch3/before/320andup/scss/_76s.scss`文件。为了将来参考，我只要求你打开文件的名字，而不是陈述整个路径。所以，对于这个文件，我会要求你打开`768`文件。当我们需要编辑适用于布局的样式时 992 px 和更宽；我会请你打开你的`992`文件，等等。建立之后，让我们继续向`768`文件添加一些代码。在这份文件中，我们的 SCSS 曾经这样读:

```html
.hero {
  h1 {
    font-size: 108px;
  }
  p{
    font-size: 40px;
  }
}
```

现在我们将`.hero`替换为`.jumbo`。

所以现在，SCSS 文件的整个部分应该看起来像下面的代码片段(后面跟着 CSS):

```html
.jumbo {
  h1 {
    font-size: 108px;
  }
  p{
    font-size: 40px;
  }
}
```

然后，在前面的代码片段中添加以下 CSS:

```html
@media only screen and (min-width: 768px) {

  .jumbo h1 {
    font-size: 108px; }
  .jumbo p {
    font-size: 40px; } }
```

所以，很酷的一点是`.jumbo h1`和`.jumbo p`从`.hero`解耦后，它们的可重用性更高了，后者有一个非常具体的应用。

现在我们需要为我们的**图库**页面设计风格。让我们使 HTML 代码如下所示:

```html
<div class="hero subhead">
  <div class="container">
    <h1>Gallery of My Stuff</h1>
    <p>There is almost all excellent stuff here. The rest is just really good.</p>
  </div>
</div>
```

我们没有为 320 种样式分配`subhead`样式，但是让我们为需要文本来更好地使用可用空间的样式添加它。第一站是 480 px 可视断点。看看这个 480 px 的布局；我们可以把字体放大一点。这似乎是一个小小的改变，但让我们这样做不仅因为我们可以，而且因为明年几乎肯定会有一个 520 像素宽的平板电脑，现在你花时间这样做了，你的布局将更有可能保持这个分辨率！

如果您正在使用 SCSS(或另一个预处理器)，请将以下代码添加到您的`480px`文件中:

```html
.subhead {
h1 {
    font-size: 48px;
  }
  p{
    font-size: 24px;
  }
}
```

这将呈现再次嵌套在查询`@media only screen and (min. width: 480px)`中的 CSS，如下所示:

```html
.subhead h1 {
  font-size: 60px; }
.subhead p {
  font-size: 24px; }
```

我们保持文本居中，因为布局的其余部分也将居中。一旦我们添加了内容面板，就会有更多的内容。

让我们进入下一个可视断点，即 600 px。`48px`的标题看起来有点微不足道。让我们继续，一直泵到`60px`。将此添加到您的`600px`文件中:

```html
.subhead {
  h1 {
    font-size: 60px;
  }
}
```

上面这段代码呈现了以下 CSS:

```html
.subhead h1 {
  font-size: 60px; }
```

现在，转到 768 px 可视断点—您觉得它怎么样？我认为这种字体大小在这里和其他断点处都有效，但是，如果你有这样的倾向，也可以更改为更大的大小。在某种程度上，这取决于你有多希望根据你的内容来定制字体大小，或者你有多希望一些更安全、更通用的样式来很好地处理动态内容。我使用这些布局的目标是制作一个可能适用于广泛内容的布局。

现在`subhead`英雄里的字体各种大小都好看！花点时间重新调整你的浏览器的大小，看看一切是如何改变和使用现有的屏幕空间的。有一点你可能会注意到，文本和观看区域边缘之间的空间变得非常窄，达到 600 像素到 786 像素之间。您可能还记得，发生这种情况的原因是因为我们在遇到 768px 断点之前不会用 `container`类来标记`div`标签。我们稍后会解决这个问题，但是在我们过多地处理它之前，让我们看看它是如何处理内容面板的。

在这一点上，我应该提到我自己构建响应性布局的方法，无论是单独工作还是与团队合作，总是像这样递归。我试图构建页面的一个组件，直到我觉得它要么正是我想要的，要么我发现我对它将如何与页面上的其他内容一起播放有疑问；对我来说，这是一个这样的关头。在与团队合作时，我可能会开始编写这个页面的代码，并从设计人员或其他开发人员那里获得反馈，然后调整它，直到我们都足够满意地发送代码或向客户展示，无论情况如何。因为，我们正在为自己制作一个网站，我们只是独自迭代(你和我一起)。

因此，在这一点上，我们将添加我们的内容面板，但然后我们将需要循环返回，并确保我们的`subhead`英雄看起来正常。

# 内容面板

您可能还记得，与**主页**页面一样，每个内容面板都有一个图像、一个标题和一个简短的简介。

![Content panels](img/6463_03_12.jpg)

如果我这样做是为了在网站上展示我的工作组合，我会使用屏幕截图来突出显示每个项目，并为每个项目编写相当短的标题和简介。默认情况下 320 和 Up 每个标题都作为一个链接指向相应的页面，但是你可以链接每个面板，如果你担心人们不会点击它。稍后，我们将制作一个示例页面来演示如果用户单击标题，他们可能会在哪里着陆。

对于这个示例页面，我们将继续使用占位符图像和 Lorem Ipsum，但是如果您有一些准备，请随意制作实际的、有意义的内容。此外，如果您将这些布局与某种内容管理系统或博客挂钩，您应该考虑如何为这些方法更改代码。例如，您可能正在通过模板中的循环构建此布局，该模板依赖于您创建的`gallery`对象的数量。

对于面板本身，你所需要做的就是使用我们在**主页**页面上放置的相同面板；但不是只有三个，你可以添加任意多个来展示你的牛逼作品。

以下是制作第一组三个面板所需的 HTML 代码:

```html
<div class="full clearfix">
  <div class="grids grids-three clearfix">
    <div class="header header-link clearfix">
      <h2 class="h2">Heading</h2>
    </div>
    <div class="grid grid-1 clearfix">
      <p class="grid-a"><img src="img/410x230.png" alt=""></p>
      <h3 class="h2"><a href="#">Lorem ipsum dolor</a></h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    </div>
    <div class="grid grid-2 clearfix">
      <p class="grid-a"><img src="img/410x230.png" alt=""></p>
      <h3 class="h2"><a href="#">Lorem ipsum dolor</a></h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    </div>
    <div class="grid grid-3 clearfix">
      <p class="grid-a"><img src="img/410x230.png" alt=""></p>
      <h3 class="h2"><a href="#">Lorem ipsum dolor</a></h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    </div>
  </div><!-- / grids -->
</div>
```

现在，你只需要保存和刷新你的页面，你就会看到这一切工作！效率惊人，不是吗？现在，当然，对于你自己的内容来说，使用 410 x 230 像素的图像是非常关键的，你可以使用图像编辑软件或 CMS 或博客中的漂亮编辑工具来裁剪这些图像。你会注意到在这组三个面板的上方有一个`<h2>`标题。只有当你有一些合理的分组会受益于头衔时，我才会包括这个。无论有没有这个特殊的标题，布局都会很好。我不建议删除`<h3>`标题，因为它们和图像一起，将真正帮助浏览者快速浏览页面并找到信息。

因此，此时，您可以使用代码示例中的占位符图像来构建此页面，或者开始包含您自己的内容。如果你是静态的，而不是用某种模板中的循环来构建页面，你只需要继续复制粘贴这些面板。

实验一点；然而，我想给你一些关于这些面板如何在页面上工作的快速想法。需要考虑的一件事是如何让面板布局不被标题或额外的空白所分隔。你真正需要做的是根据需要不断重复`grid-1`、`grid-2`和`grid-3`块(当然是其中的整个标记)。我也在示例代码中分享了这一点。

另一件要考虑的事情是，如果没有三的精确倍数的面板，该怎么办。也没关系！它只是工作。我也在示例代码中分享了这一点。我在仅仅五个街区的地方停了下来，它就像你想要的那样展开了。

这一页只剩下两个问题需要解决。你可能会注意到，第一个问题是，在我最初的线框中，我想左对齐文本以获得更大的布局。有点武断，我已经决定，我们将为所有 600 像素以上的布局这样做。转到您的`600px`文件并添加以下代码:

```html
.subhead {
  text-align: left;
  h1 {
    font-size: 60px;
  }
}
```

或者，在 CSS 中的`600px` `@media`查询中添加以下代码:

```html
.subhead {
  text-align: left; }
.subhead h1 {
  font-size: 60px; }
```

现在，文本只对较小的设备居中，对平板电脑和较大的设备左对齐。

当你在 600 像素和 768 像素之间调整浏览器大小时，你可能会遇到第二个问题。希望你已经注意到英雄中的文本比布局的其他部分更靠近观看区域的边缘。您可能还记得我们在`content`容器中有所有的内容，但是直到`768px` `@media`查询激发时，该类才得到样式。或许我们应该尝试将`768` `@media`查询中的样式应用到`600px`宽度的屏幕上，看看这对`600px`上方所有断点处的所有布局有何影响。所以，现在，继续从`768px`文件中剪切该样式，并将其粘贴到`600px`文件中。或者，如果您使用的是普通 CSS，则需要将此代码从`768px` `@media` 查询中移除，并粘贴到`600px`查询中。

现在，一旦你做到了这一点，回到并玩两个**主页**和**画廊**页面通过调整你的浏览器。英雄中的标题现在与它下面的面板保持很好的对齐。这个改动似乎不会对**首页**页面英雄或者页脚造成不利影响，所以看起来我们可以走了。

在某种程度上，这就是我如何为有响应的网站开发的，我看到什么中断了，并试图尽可能以一种通用的、优雅的方式来修复它，而不会对内容施加不当的限制。

现在，本章的最后一个大任务是制作用户点击相应内容面板的链接时将登陆的页面。我们将这个任务称为画廊细节。

# 画廊细节

所以，让我们来看看这个页面上我们想要的内容，以及如何为不同的设备制定布局策略。

我认为，大多数人希望在任何类型的投资组合中看到的主要内容是一些关键图像和一些描述图像的更长、更详细的文本。

以下是我们需要的手机屏幕布局:

![The gallery detail](img/6463_03_13.jpg)

截图中显示的较小的方块将是用户可以触摸或点击的缩略图，以在页面上的较小图像上方显示较大的图像。第一个缩略图将是**图库**页面加载时显示的默认图像。我们还将突出显示当前活动的带有边框的缩略图。为了做到这一点，我们将需要制作所有图像的全尺寸和缩略图尺寸的图像。每张图片的描述将在缩略图下方(这在我的书中是完全合适的)。如果你的图片足够引人注目，人们会向下滚动阅读。

现在，让我们看看光谱的另一端——桌面视图。既然我们有了更多的屏幕空间，我们将希望改变事物的方向:

![The gallery detail](img/6463_03_14.jpg)

随着空间的增加，我们可以把你辛辛苦苦写的文本放在缩略图下方的大图像旁边。让我们假设，与其他响应布局一样，这两个布局将覆盖所有断点，只要我们以百分比来确定页面关键组件的大小。

和之前一样，我们先从手机屏幕的布局开始。页面的 HTML 结构应该相当简单。我们将需要把所有的图像放在页面上，隐藏除第一个特色图像以外的所有图像，然后我们将添加我们的文本。还是那句话，让我们不要想太多桌面页面会是什么样子；让我们尽可能简单地了解移动布局需要什么。

和以前一样，您需要确保重新使用页面的基本结构——页眉、导航和页脚。我们将在结束`</header>`标记后在标题下插入新内容(准确地说)。请确保仔细调查以下代码在`ch3/320andup/gallery-item.html`示例代码中的去向，以便您可以继续。

以下是我们将添加到图库项目页面的 HTML 代码:

```html
<header class="page-header">
  <h1>This is a Title</h1>
  <h2>Subtitle with more words</h2>
</header>
<div class="gallery-showcase">
  <div class="gallery-image-area">
    <ul class="featured-images">
      <li class="featured-image-item active"><img src="img/gallery_image-1.png" alt="image 1" /></li>
      <li class="featured-image-item"><img src="img/gallery_image-2.png" alt="image 2" /></li>
      <li class="featured-image-item"><img src="img/gallery_image-3.png" alt="image 3" /></li>
    </ul>
    <ul class="thumbnail-images">
      <li class="thumbnail actice"><img src="img/thumb-1.png" alt="thumb 1" /></li>
      <li class="thumbnail"><img src="img/thumb-2.png" alt="thumb 2" /></li>
      <li class="thumbnail"><img src="img/thumb-3.png" alt="thumb 3" /></li>
    </ul>
  </div>
</div>
<div class="gallery-description">
  <p>some text here…</p>
  <p>even more text if you want…</p>
</div>
```

您应该注意到，在代码的基本结构中，我们有一个外部容器，用于保存我们所有的主图像和缩略图。该容器的等级为`gallery-showcase`。在这个类中，有大图像和小缩略图的容器，分别是`featured-images`和`thumbnail-images`，用户可以点击或触摸它们来查看相应的大图像。内部`gallery-image-area`集装箱主要是为了帮助布局。正如我们对幻灯片显示所做的那样，我们将把所有的图像加载到页面上，同时隐藏那些没有使用 CSS 激活的图像。稍后，我们将挂钩一些简单、优雅的 JS，使其全部交互。在前面的代码中，您会注意到最后一点是`gallery-description`容器，它将保存您写的关于投资组合项目的文本。

我已经为您包括占位符图像，它们在共享代码中提供。大图像的大小是 550 x 550 像素，缩略图的大小是 80 x 80 像素。如果您想在不修改布局的情况下将这些布局用于自己的目的，您需要将一些图像编辑到这些大小。

如果你感到不耐烦，就像我经常做的那样，你已经刷新了这个页面，可以看到它还没有准备好黄金时间。我们有些工作要做。让我们从隐藏页面加载时看不到的大型图库图像开始。和我们的英雄幻灯片一样，我们将为第一张图片分配一个类别；这将使它成为页面上唯一可见的图像。回到我们刚刚制作的 HTML 文件，注意到我们已经将类`active`分配给了第一个大图像和第一个缩略图。

好了，我们开始造型吧！

我们要给`page`文件添加一些样式；对我来说那是`page.scss`文件。但是，如果你只是直接编辑 CSS，你只需要将这些样式添加到你的 CSS 文件中。SCSS 预处理器呈现它们的方式包括代码中表格样式下面的这些样式，在文件中相当远的地方。我建议遵循这一点，以便这些样式在样式表中比更通用的站点范围样式更低。我倾向于认为`site`和`page`文件与*安迪*文件有点不同(无意冒犯)。我认为`site`样式是页面上的元素，会出现在网站的每一页(或几乎每一页)上。然后，我认为`page`样式是特定页面特有的，不太可能在另一个页面上重复使用。

首先，让我们按照我们想要的方式获取标题。你可能会注意到我们在这一页上有第二个`<header>`(是的，这是允许的)。我们希望在页面内的标题中添加一些特定于页面的样式。首先，我们需要让图像下方的文本与中心对齐，因此我们在 SCSS 或 CSS 中只需要将以下代码添加到适当的位置(如果您不确定，请参见可从 Packt Publishing 网站下载的代码示例):

```html
.page-header {
  text-align: center;
  margin: 12px 0;
}
```

然后，我们需要为字体应用样式:

```html
.page-header {
  text-align: center;
  margin: 12px 0;
  h1 {
    font-size: 30px;
    margin: 0;
  }
  h2{
    font-size: 18px;
  }
}
```

前面的代码呈现给这个 CSS:

```html
.page-header {
  text-align: center;
  margin: 12px 0; }
  .page-header h1 {
    font-size: 30px;
    margin: 0; }
  .page-header h2 {
    font-size: 18px; }
```

现在，让我们将样式应用于隐藏所有不活跃的大图库图像。为此，请编写以下 SCSS 代码:

```html
.gallery-image-area {
  .featured-image-item {
    display: none;
    &.active {
      display: block;
    }
  }
}
```

上面的代码呈现了以下 CSS:

```html
.gallery-image-area .featured-image-item {
  display: none; }
  .gallery-image-area .featured-image-item.active {
    display: block; }
```

刷新页面，现在您应该只看到第一个大图库图像。进步！

你应该看看我们在 320 px 的布局(记住这首先是移动的)，你会看到，到目前为止，一切都是堆叠的——绝对是一切。当然，我们唯一不想堆叠的是缩略图。所以，让我们把这些布局正确。基本上，我们需要做的就是让`<li>`标签向左浮动，并添加一些空间，我们将拥有我们需要的大部分内容。

将以下代码添加到样式表中:

```html
ul {
  list-style: none;
}
.thumbnail {
  float: left;
  margin: 0 20px 20px 0;
}
```

在这段代码中，我们首先移除了浏览器中列表的默认项目符号(但仅针对`gallery-image-container`块内的列表)，然后让缩略图向左浮动。这样的话，你就可以拥有你想要的缩略图，但是我会把它控制在三个左右，这样对你网站的访问者来说就简单了。然而，问题是，如果你有三个，就像我对共享代码做的那样，你会欺骗自己认为这个布局工作得很好。如果你有三个缩略图，暂时删除第三个缩略图的整个 HTML 代码，这样你就只剩下两个了。

![The gallery detail](img/6463_03_15.jpg)

看看会发生什么？我们在缩略图下面的文本会慢慢上升，因为缩略图`<li>`是浮动的。如果你不知道彩车的所有特性，我鼓励你去阅读它们。以下是一篇关于彩车的优秀文章的链接:[http://alistapart.com/article/css-floats-101](http://alistapart.com/article/css-floats-101)

但是，现在，我将向您展示一种解决方法。我们所需要做的就是清除保存文本的容器。您可以通过添加以下 SCSS/CSS 来实现:

```html
.gallery-description {
  clear: left; 
}
```

在我们进入更大的布局之前，让我们再做一件事:让我们将所有内容从屏幕边缘移开，并将其大小设置为类似于导航的大小。我们可以使用类似于之前对英雄使用的方法来做到这一点。

将以下 SCSS/CSS 代码添加到样式表中:

```html
.gallery-showcase, .gallery-description {
  width: 90%;
  margin: 0 auto;
}
```

现在，看起来不错！我们所需要的是使布局适合更大的布局。一旦我们在 768 像素以上，我们就可以将文本移动到大图像的右边。继续打开你的`_768`文件，或者在你的 CSS 中找到`768` `@media`查询，我们会以最小的努力将文本向右上方移动。这里是 SCSS/CSS 代码(再次；它与本章前面显示的相同):

```html
.gallery-showcase {
  width: 45%;
  float: left;
  margin: 0 2.5%;
}

.gallery-description {
  clear: none;
  width: 45%;
  float: left;
  margin: 0 2.5%
} 
```

现在，拖动浏览器的宽度，尽情享受吧。还有最后一个问题需要解决:您可能会注意到，一旦导航的大小发生变化，导航部分下的标题就会上移。您可能记得这是由于导航部分是一个固定的元素。我们需要做的就是在`page-header`上指定一个不同的边距，如下所示:

```html
.page-header {
  margin: 66px 0 12px 0;
}
```

而且，看起来应该没错。刷新页面，尽情享受吧！

## 后链接

让我们给页面添加一个简单的增强，以便于导航。由于此图库项目页面不在菜单中，为每个图库项目添加一个菜单项不一定可行，让我们在页面顶部添加一个反向链接。这使得任何设备上的用户都可以轻松返回到**图库**页面。

首先，让我们将此链接添加到`gallery-item.html`上的标记中。使后链接成为标题中的最后一项内容:

```html
<a class="back btn" href="./gallery.html">&lt; Back</a>
```

以下是上下文中的代码:

```html
<header class="page-header">
  h1>This is a Title</h1>
  <h2>Subtitle with more words</h2>
  <a class="back btn" href="/gallery.html">&lt; Back</a>
</header>
```

刷新您的浏览器，您会注意到，由于 320 和更高版本，您可以免费获得一些不错的按钮样式。我们需要多做一点造型，但首先让我弄清楚一些重要的事情。我们刚刚构建的是一个从`gallery.html`页面链接的示例图库项目页面。如果你要把它建成一个手工制作的静态网站(尽管我之前建议不要这样做)，你需要为你所有的图库项目手工制作这个页面，并给每个页面起一个自己的名字，而不是`gallery-item.html`。相反，你可能需要把它命名为`company-site.html`或者你正在展示的任何项目。此外，您会注意到我创建了返回**图库**页面的反向链接，如下所示:

```html
…href="gallery.html"…
```

那不是一种典型的形成链接的方式；在您自己的项目中，您更有可能创建如下链接:

```html
…href="/gallery.html"…
```

在我们的示例代码中，我们需要使用`gallery.html`，因为更典型的`/gallery.html`会将我们带到整个项目的根源。你猜怎么着？这个项目没有`gallery.html`页面，因为我已经把项目分成了几章。因此，通过这个示例项目，您将获得一个 **404** 响应(**页面未找到**)。试试看。

总而言之，你很可能希望你的链接看起来像`href="/gallery.html"`而不是像`href="gallery.html"`。

现在，让我们给这个按钮添加一些样式，这样它就不会仅仅停留在页面的中间。目前最简单的就是向左浮动。为此，将以下样式代码添加到您的等效文件`_page.scss`中:

```html
.back {
  float: left;
}
```

我将它嵌套在`.page-header`的代码中。因此，在这种情况下，代码如下所示:

```html
.page-header {
  text-align: center;
  margin: 12px 0;
  h1 {
    font-size: 30px;
    margin: 0;
  }
  h2{
    font-size: 18px;
  }
  .back {
    float: left;
  }
}
```

CSS 中的代码如下所示:

```html
.page-header .back {
  float: left; }
```

但这还不够。添加此样式后刷新页面，您会注意到东西看起来已经损坏。那是因为我们需要清除那个漂浮物。简单！将以下代码行添加到您的 SCSS 或 CSS 中，用于`.gallery-showcase`、`.gallery-description`样式:

```html
clear: both;
```

这种风格将应用于两个元素，这不会对我们的目的产生任何不利影响。不过，如果你想的话，如果你觉得困扰的话，你可以把你的 CSS 代码分成两种不同的样式。这个按钮现在还有最后一件事要做。它就在视窗和主图像旁边。让我们回到过去，加上一个空白，让它远离一切。以下是更新后的`.page-header` `.back`风格应该是什么样子:

```html
float: left;
margin: 20px;
```

接下来，让我们让画廊项目 JavaScript 发生！

## JavaScript 库项目

接下来，我们需要在这个图库项目页面中编写一些 JavaScript 来满足我们的需求。我们的需求很简单；如果用户点击缩略图，我们希望显示相应的较大图像。有很多策略可以做到这一点，但我要依靠两件事来做到这一点:我们的页面结构和 jQuery 轻松索引东西的能力。所以，让我先给你看代码，然后我会解释它是如何工作的。在`ready`功能内的任何地方，将此代码粘贴或键入您的`script.js`文件中(如果您不确定，请查看可以从 Packt Publishing 网站下载的代码示例):

```html
$('.thumbnail').on('click', function(){
  var idx = $(this).index();
  $('.featured-images').children('.active').removeClass('active');
  $('.featured-image-item').eq(idx).addClass('active');
  $('.thumbnail-images').children('.active').removeClass('active');
  $('.thumbnail').eq(idx).addClass('active');
});
```

下面是这段代码一行行的操作:

下面一行代码将一个事件侦听器附加到缩略图上，以便在单击它时，执行该函数中的其余代码:

```html
$('.thumbnail').on('click', function(){
```

下面一行代码获取您刚刚单击的缩略图的从零开始的索引。换句话说，它会找出这个缩略图旁边还有多少其他缩略图，以及它在序列中的编号。从零开始是计算机计数的方式。所以，如果你点击了列表中的第一个缩略图，它会得到一个`0`的索引；第二个会得到一个`1`的指数。抱歉，如果这是令人困惑的，但这是计算机如何计算许多事情。不管怎样，我们马上就要用这个数字来瞄准`featured-images`列表中对应的图像。

```html
var idx = $(this).index();
```

下面一行代码从当前有类`active`的`featured-image-item`中删除了`active`类:

```html
  $('.featured-images').children('.active').removeClass('active');
```

下面一行代码将`active`类添加到与相应缩略图位于列表相同位置的`featured-image-item`容器中:

```html
  $('.featured-image-item').eq(idx).addClass('active');
```

以下两行代码的功能与我们刚刚看到的两行相同，并且还在缩略图上移除和添加了`active`类:

```html
  $('.thumbnail-images').children('.active').removeClass('active');
  $('.thumbnail').eq(idx).addClass('active');
```

稍微简化一下，前面的代码说，当用户点击*第 n 个*缩略图时，`active`类使其活跃，然后使*第 n 个*特色图像活跃。

现在您已经有了`active`类，另一个不错的增强是添加一个边框来突出显示活动缩略图。

将您的`_page.scss`文件(或其等效文件)更新为以下代码:

```html
.thumbnail {
  float: left;
  margin: 0 20px 20px 0;
  &.active {
    border: 3px solid $basecolor;
    margin: 0 14px 14px 0;
  }
}
```

CSS 代码如下所示:

```html
.gallery-image-area .thumbnail.active {
  border: 3px solid #cb790f;
  margin: 0 14px 14px 0; }
```

我添加了一个 3 px 宽的边框，并选择了我们主题的基础颜色(尽管选择最适合你的颜色)。由于边框会让每个大拇指占用更多的空间，所以我把边距缩小了相应的量。它让缩略图有点跳跃，但我不介意，因为它给了用户一些反馈。如果你介意，我鼓励你找到一个策略，让它不要那样做！

# 总结

我们已经走了很多路，再一次！在这一章中，我们做了一个图库概述和一个图库细节，它们将同样适用于从手机到台式机的设备。我们重新使用了 320 和 Up 的一些新贵，这样我们就不必从头开始构建响应迅速的三列布局。这些列在小屏幕上堆叠得很好，并水平排列以填充较宽屏幕上的宽度。我们为**图库**页面制作了一个稍加修改的英雄，而无需编写大量的覆盖样式，我们甚至编写了一些优雅的 JavaScript 来使**图库**细节页面具有交互性。在下一章，我们将建立一个页面，以便网站访问者可以联系我们。