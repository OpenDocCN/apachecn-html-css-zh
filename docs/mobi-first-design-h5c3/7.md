# 七、附录 b：使用 CSS 预处理器

如果你已经读过这本书的任何部分，你已经知道我在求你用一个 CSS 预处理器，比如 Sass 或者 LESS。我更喜欢萨斯有几个原因，但我不会太深入细节。相反，我更喜欢关注两者的相似之处，我会让你来决定你更喜欢哪个框架。我没有忸怩作态或言不由衷；老实说，我觉得这种争论令人筋疲力尽，尤其是当它们涉及到个人背景时。

我会第 n 次说我更喜欢萨斯。对我来说，其中一部分是语法，但与 LESS 的区别相当小。对我来说，它的另一部分是我主要使用 Ruby on Rails，Rails 支持开箱即用的 Sass。此外，我发现 SCSS 的语法(而不是更早出现的更老的 Sass)与 CSS 非常相似，我用了大约 25%的时间来使用 CSS，所以我也更喜欢它，因为它不太像是我非常熟悉的 CSS 的认知转变。

我也发现 LESS 的一些语法令人困惑。两个主要的例子是它们如何使用`@`符号表示全局变量，而不是 Sass 使用的`$`符号，以及 LESS 如何使用 CSS 类的符号`.`(句号)来调用 mixin，而 Sass 使用更明确的`@include`。无可否认，这些都是小问题。

但是，这就是我的理由。我希望你能发现它们有助于找出最适合你的方法。

现在，让我们继续了解所有这些预处理器如何帮助您快速高效地工作。希望这足以刺激你的食欲，让你学到更多。我将用一个资源列表来结束这一章，你可以在那里独立学习更多。

# 为什么？

为什么我们需要什么东西来预处理 CSS？这里有几个简单的原因:

*   CSS 中没有变量
*   在设计嵌套元素的样式时，您的代码不会是 DRY，也就是说，您会重复地键入许多类和/或 id
*   在 CSS 中重用代码并不方便，所以最终得到的代码并不是 DRY
*   CSS 一点逻辑都没有
*   预处理器允许我们以动态方式操作颜色关系，而不是静态分配所有颜色值；当结合使用变量的能力时，这一点尤其强大

这些都是宽泛的解释。这个附录，本质上是整本书，应该会给你很多详细的例子，说明它们什么时候有用。

# 如何？

好吧，那么你从来没有尝试过预处理器。你是如何开始的？当然，这取决于你是否选择 LESS 而不是 Sass。我将向您介绍使用这两种方法的三种简单方法。

## 代码

最简单的入门方法是使用名为 CodeKit 的 Mac OS X 应用。我没有从这个应用的制造商那里得到回扣。这只是一个可靠、简单的应用，它能做很多过去让人感到痛苦的事情。没那么贵，可以在[http://incident57.com/codekit/](http://incident57.com)买到。

如果你使用除了苹果以外的任何东西，你会很不幸地倒霉，因为这个应用只适用于苹果。

一旦你下载并启动它，添加一个项目是微不足道的。app 足够智能，可以找到你项目中的所有文件；更准确地说，适合这些类别的文件是样式表、脚本、页面和图像。

CodeKit 将以各种方式预处理所有这些东西；它甚至会为你优化你的图像。虽然我是命令行的粉丝，但这个应用的便利性确实赢得了我的好感。我试图避免在这里滔滔不绝，但它也会做一些事情，比如预处理 haml 并运行 JSLint 或 JSHint 它连接并缩小了您所有的 JavaScipt，优化了图像，并且有许多功能，我不会深入讨论。

但是，我们现在不在这里使用所有这些东西；我们在这里讨论它如何促进 LESS 和 Sass 的预处理。我将继续描述如何设置它，假设您还没有这个应用，但只是想更多地了解它是如何工作的，更具体地说，它是如何与 320 和 up 一起工作的。如果你正在使用 320 和更高版本，并且已经将你所有的项目文件放在了它们应该在的地方，你不需要做很多其他的事情就可以开始了。只需确保您选择了适当的文件，该文件实际上拉进了所有其他文件，并确保它将正确的文件输出到正确的位置。由于 CodeKit 有一个简单的 UI，你所要做的就是右击`320andup-scss.scss`(例如，有一个 LESS 和其他的等效文件)并设置输出路径、文件名等等。差不多就是这样。现在让我们看看一些命令行工具。

## 指南针

Compass 是一个社区驱动的命令行工具。也有它的图形用户界面。我对它的经验比较少，但是如果你想试试的话，他们的网站上有很多教程和指南:[http://compass-style.org/](http://compass-style.org/)。Compass 是一个 Ruby 宝石，因此您可以在命令行上轻松安装和运行它。指南针不会处理 LESS。但是使用节点包管理器设置 LESS 预处理器非常简单。

## 萨斯/LESS 宝石

这个解决方案类似于使用指南针。你用一个简单的配置在命令线上安装一个宝石。就像前面提到的 Compass 和 CodeKit 一样，它会查找文件更改并处理您的预处理代码。我对 LESS 在成功查找任何代码更改方面存在问题。

## 铁轨

因此，这在技术上是第四种方式，提到 Rails 作为预处理 CSS 的方式有点多余，但是您可以在 Rails 项目中使用前面提到的任何宝石。萨斯宝石将观察代码变化，并在没有任何进一步交互的情况下处理它们。同样，过去我也遇到过让 LESS 监视文件更改的问题，我不得不重新启动服务器来处理代码。这对我来说是不可接受的，因为它只是在吞噬时间。另一方面，事情现在可能已经解决了，但我已经转向萨斯，还有其他原因，其中一些我之前已经概述过了。

我们稍后将继续讨论预处理代码本身发生的事情，但我只想告诉您，如果您被命令行工具吓倒，请不要害怕。我进入这个行业主要是从一个图形人员开始的，并且开始喜欢命令行的简单和优雅。有许多简单的初学者课程是免费的，或者在网上非常便宜，这将帮助你克服你的恐惧或困惑。我是*学习硬道理*教程的粉丝，但是还有很多，而且还会继续有更多。一旦您熟悉了命令行，我可以保证您将能够比以前更高效地工作。

# 什么？

让我们看看我们正在合作的示例项目，看看它是如何结合在一起的。在本书中，我重点介绍了 320 和更高版本的 SCSS 变体，因此我将在本附录中继续使用相同的版本。在大多数情况下，LESS 是相似的，但有一些句法差异。我将指出几个关键的例子。

来看看[第二章](2.html "Chapter 2. Building the Home Page")*搭建首页*的`before`项目文件。偷看一下`320andup`目录里面，暂时看一下文件结构。我主要想关注的是`css`目录和`scss`目录。其他兄弟姐妹如`less`、`sass-compass`、`sass`、`scss-compass`持有代码，以不同的方式剥这只猫的皮。

移动到`scss`文件夹，你会注意到文件`320andup-scss.scss`和一堆前面带下划线的文件。前面带下划线的文件，例如`_1382.scss`，被称为分音。下划线让预处理器知道不要将这些单独的文件转换成 CSS。但是他们最终还是要被处理的，对吗？这发生在它们被导入到前面没有下划线的唯一文件之后。(另一方面，LESS 不使用这种下划线约定。对我来说，这是我给萨斯的另一个小优势。使用 Sass，我可以对文件树进行快速的可视化扫描，并知道哪些文件是分音，哪些不是。)

以`320andup-scss.scss`文件为例，把这个文件想象成母船。所有其他的小船都停靠在那里卸货。一旦一切就绪，事情就开始发生了。具体来说，CSS 发生了。

为了了解这是如何结合在一起的，让我们看看母船——`320andup-scss.scss`。

你会注意到这个文件只是一个很好的干净的文件，它命令`imports`。请注意，在`import`语句中，分音前面没有下划线。此外，排序也很重要，例如，在尝试使用变量和混合之前，您需要定义所有变量和混合。另一个`imports`放在`@media`查询中，这样那些以下划线(偏旁)开头的文件只在这些查询中使用。

这有什么了不起的？它使您的代码保持超级整洁，易于使用和维护。这就是 320 及以上框架的好处。它负责组织这一切的繁忙工作。

最后，我想列出一些资源，供您查看，以了解更多关于 CSS 预处理器及其助手的信息。好好享受！

# 资源

下面的列表是资源列表让你了解更多关于 CSS 预处理器和它们的助手:

*   萨斯:[http://sass-lang.com/](http://sass-lang.com/)
*   http://lesscss.org/
*   指南针:[http://compass-style.org/](http://compass-style.org/)
*   CodeKit:[http://incident57.com/codekit/](http://incident57.com/codekit/)